<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TuniLearn</title>
<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,sans-serif;
  background:#111;
  color:#1e90ff;
}

/* AUTH */
#auth{
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.phone{
  width:360px;
  background:#1a1a1a;
  padding:25px;
  border-radius:22px;
}
h1{text-align:center;color:white}
.dot{color:red}
p{color:#aaa;text-align:center;font-size:15px}

input{
  width:100%;
  padding:12px;
  margin:8px 0;
  border-radius:12px;
  border:none;
}

/* SHOW PASSWORD */
#showPass{
  width:100%;
  background:#333;
  color:white;
  border:none;
  font-size:10px;
  padding:4px;
  border-radius:999px;
  margin-bottom:10px;
  cursor:pointer;
}

/* BUTTONS */
.buttons{
  display:flex;
  justify-content:space-between;
}
button{
  width:48%;
  padding:12px;
  border:none;
  border-radius:14px;
  background:#e53935;
  color:white;
  cursor:pointer;
  font-weight:bold;
}

#forgot{
  width:60%;
  margin:6px auto;
  display:block;
  font-size:12px;
  background:#2196f3;
  padding:6px;
  border-radius:8px;
}

#status{
  color:#ff5252;
  text-align:center;
  margin-top:10px;
  font-weight:bold;
}

/* HOME */
#home{display:none;padding:20px}
.home-title{color:white;font-size:18px;margin-bottom:10px}
.banner{
  border:2px solid #1e90ff;
  background:#87cefa;
  color:black;
  padding:12px;
  border-radius:14px;
  text-align:center;
  font-weight:bold;
}

.level-container{
  margin-top:15px;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.level{
  border:1px solid #1e90ff;
  padding:12px;
  border-radius:10px;
  background:#222;
  color:#ccc;
  cursor:pointer;
  position:relative;
}

.sublvl-dropdown{
  display:none;
  position:absolute;
  top:100%;
  right:0;
  background:#222;
  border:1px solid #1e90ff;
  border-radius:8px;
  width:160px;
  z-index:10;
}

.sublvl-dropdown div{
  padding:6px 10px;
  cursor:pointer;
  color:white;
}

.sublvl-dropdown div:hover{
  background:#1e90ff;
  color:#111;
}

/* LEVEL PAGE */
#levelPage{display:none;padding:20px}
.file{
  border:1px solid #1e90ff;
  padding:8px;
  border-radius:8px;
  margin:6px 0;
  color:#ccc;
  cursor:pointer;
}
.back{
  margin-top:15px;
  border:2px solid green;
  background:none;
  color:white;
  padding:8px;
  border-radius:10px;
}

/* RED SUBJECT PAGE */
#subjectPage{display:none;padding:20px;background:red;height:100vh;color:white}
#subjectPage h2{text-align:center;margin-bottom:15px}
.subject-list div{
  background:#880000;
  padding:10px;
  margin:5px 0;
  border-radius:8px;
  cursor:pointer;
  text-align:center;
}
</style>
</head>
<body>

<!-- AUTH -->
<div id="auth">
  <div class="phone">
    <h1>Tuni<span class="dot">•</span>Learn</h1>
    <p>منصة تونسية للفروض والاختبارات</p>

    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">

    <button id="showPass" onclick="togglePassword()">Show password</button>

    <div class="buttons">
      <button onclick="signup()">Sign up</button>
      <button onclick="login()">Log in</button>
    </div>

    <button id="forgot" onclick="forgotPassword()">Forgot password</button>
    <div id="status"></div>
  </div>
</div>

<!-- HOME -->
<div id="home">
  <div class="home-title">Learning Space</div>
  <div class="banner">All exams that you need</div>
  <div class="level-container" id="levelContainer"></div>
</div>

<!-- LEVEL PAGE -->
<div id="levelPage">
  <h2 id="levelTitle" style="color:white"></h2>
  <div class="file" onclick="openSubjects()">فروض مراقبة</div>
  <div class="file" onclick="openSubjects()">فروض تأليفية</div>
  <button class="back" onclick="backHome()">Back / رجوع</button>
</div>

<!-- RED SUBJECT PAGE -->
<div id="subjectPage">
  <h2>المواد التعليمية</h2>
  <div class="subject-list" id="subjectList"></div>
  <button class="back" onclick="backLevel()">Back / رجوع</button>
</div>

<script type="module">
// Firebase import
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-analytics.js";

const firebaseConfig = {
  apiKey: "AIzaSyCXzhUgYy1MMvnftDi1d5XFeRJTFa35eQU",
  authDomain: "tunilearn-e4b8e.firebaseapp.com",
  projectId: "tunilearn-e4b8e",
  storageBucket: "tunilearn-e4b8e.appspot.com",
  messagingSenderId: "730477107505",
  appId: "1:730477107505:web:eee97b8ef099326b8cf810",
  measurementId: "G-H17BY13PDN"
};

const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
</script>

<script>
const auth=document.getElementById("auth");
const home=document.getElementById("home");
const levelContainer=document.getElementById("levelContainer");
const levelPage=document.getElementById("levelPage");
const levelTitle=document.getElementById("levelTitle");
const status=document.getElementById("status");
const subjectPage=document.getElementById("subjectPage");
const subjectList=document.getElementById("subjectList");

const levels=[
 {name:"7 أساسي"},
 {name:"8 أساسي"},
 {name:"9 أساسي"},
 {name:"1 ثانوي"},
 {name:"2 ثانوي",shubs:["آداب","اقتصاد","علوم إعلامية","علوم"]},
 {name:"3 ثانوي",shubs:["آداب","اقتصاد","علوم إعلامية","علوم تقنية","علوم","رياضيات"]},
 {name:"4 ثانوي",shubs:["آداب","اقتصاد","علوم إعلامية","علوم تقنية","علوم","رياضيات"]}
];

const subjects=["عربية","فرنسية","إنجليزية","تاريخ","جغرافيا","مدنية","إسلامية","رياضيات","علوم الحياة والأرض","علوم تقنية","علوم إعلامية","فيزياء"];

// SIGNUP
function signup(){
 if(!email.value||!password.value){
  status.innerText="❌ أكمل المعطيات"; return;
 }
 const savedEmail = localStorage.getItem("email");
 if(savedEmail === email.value){
   status.innerText="❌ هذا الإيميل مستعمل مسبقاً"; 
   return;
 }
 localStorage.setItem("email",email.value);
 localStorage.setItem("pass",password.value);
 auth.style.display="none";
 home.style.display="block";
 renderLevels();
 status.innerText="";
}

// LOGIN
function login(){
 const savedEmail = localStorage.getItem("email");
 const savedPass = localStorage.getItem("pass");
 if(email.value===savedEmail && password.value===savedPass){
  auth.style.display="none";
  home.style.display="block";
  renderLevels();
  status.innerText="";
 } else status.innerText="❌ معلومات خاطئة";
}

// FORGOT PASSWORD
function forgotPassword(){
 const e=prompt("أدخل الإيميل:");
 if(e===localStorage.getItem("email")){
  alert("كلمة السر: "+localStorage.getItem("pass"));
 } else alert("الإيميل غير موجود");
}

// SHOW PASSWORD
function togglePassword(){
 password.type=password.type==="password"?"text":"password";
}

// RENDER LEVELS
function renderLevels(){
 levelContainer.innerHTML="";
 levels.forEach(l=>{
  const d=document.createElement("div");
  d.className="level";
  d.innerText=l.name;

  if(l.shubs){
    const box=document.createElement("div");
    box.className="sublvl-dropdown";
    l.shubs.forEach(s=>{
      const sub=document.createElement("div");
      sub.innerText=s;
      sub.onclick=e=>{
        e.stopPropagation();
        openLevel(l.name+" "+s);
        box.style.display="none";
      };
      box.appendChild(sub);
    });
    d.appendChild(box);
    d.onclick=()=>box.style.display=
      box.style.display==="block"?"none":"block";
  } else d.onclick=()=>openLevel(l.name);

  levelContainer.appendChild(d);
 });
}

// OPEN LEVEL
function openLevel(n){
 home.style.display="none";
 levelPage.style.display="block";
 levelTitle.innerText=n;
}

// OPEN SUBJECTS (RED PAGE)
function openSubjects(){
 levelPage.style.display="none";
 subjectPage.style.display="block";
 subjectList.innerHTML="";
 subjects.forEach(s=>{
   const div=document.createElement("div");
   div.innerText=s;
   subjectList.appendChild(div);
 });
}

// BACK FUNCTIONS
function backHome(){levelPage.style.display="none"; home.style.display="block";}
function backLevel(){subjectPage.style.display="none"; levelPage.style.display="block";}
</script>
</body>
</html>
