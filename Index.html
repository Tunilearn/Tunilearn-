<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tuni<span style="color:red">•</span>Learn</title>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial}
html,body{width:100%;height:100%}
body{background:#111;color:#1e90ff;display:flex;justify-content:center;align-items:center;overflow-x:hidden}

/* AUTH */
#auth{position:fixed;top:0;left:0;width:100%;height:100vh;background:#111;display:flex;justify-content:center;align-items:center;z-index:1000}
.phone{width:90%;max-width:360px;background:#1a1a1a;padding:20px;border-radius:20px;text-align:center}
.phone h1{color:white;font-size:22px}
.dot{color:red}
.tuni{color:white;font-weight:bold}
.top-text{color:#87cefa;font-size:14px;font-weight:bold;margin:6px 0}
input{width:100%;padding:10px;margin:6px 0;border-radius:10px;border:none}
#showPass{width:100%;background:#333;color:white;border:none;padding:6px;border-radius:999px}
.buttons{display:flex;justify-content:space-between}
button{width:48%;padding:10px;border:none;border-radius:12px;background:#e53935;color:white;font-weight:bold;cursor:pointer}
#forgot{width:65%;margin:6px auto;background:#2196f3;padding:6px;border-radius:8px;border:none;color:white}
#status{margin-top:8px;font-weight:bold;font-size:13px;min-height:18px}

/* HOME */
#home{display:none;width:100%;max-width:360px;min-height:100vh;padding:8px;position:relative;text-align:center}
#home h1{position:absolute;top:5px;left:5px;color:white;font-size:16px}
.banner{margin-top:50px;border:2px solid #1e90ff;background:#87cefa;color:black;padding:12px;border-radius:14px;font-weight:bold}
.level-container{margin-top:20px;display:flex;flex-direction:column;gap:15px}

/* LEVEL */
.level-wrapper{position:relative;width:100%}
.level{width:90%;border:2px solid #0d47a1;background:#222;color:#ccc;padding:16px;border-radius:16px;font-weight:bold;cursor:pointer;text-align:left}

/* BRANCH */
.branches{position:absolute;top:50%;left:calc(50% + 40px);transform:translate(-50%,-50%);width:190px;background:#111;border:2px solid #1e90ff;border-radius:14px;padding:8px;display:none;flex-direction:column;gap:6px;z-index:10}
.branch{border:1px solid #1e90ff;background:#333;color:white;padding:8px;border-radius:12px;font-size:13px;cursor:pointer}

/* SUBJECT */
#subjectPage{display:none;background:#333;color:white;min-height:100vh;width:100%;max-width:360px;padding:6px;position:relative;text-align:center}
#subjectPage h1{position:absolute;top:5px;left:5px;font-size:16px}
.banner-subject{margin-top:35px;border:2px solid #1e90ff;background:#87cefa;color:black;padding:10px;border-radius:12px;font-weight:bold}
.subject-list div{border:2px solid red;padding:8px;margin:5px 0;border-radius:12px;font-weight:bold;cursor:pointer;font-size:13px}
.back{position:fixed;bottom:12px;left:12px;border:2px solid green;background:none;color:white;padding:8px;border-radius:10px}

/* EXAM */
#examPage{display:none;background:#111;color:white;min-height:100vh;width:100%;max-width:360px;padding:6px;margin-top:40px;position:relative;text-align:center}
#examPage h1{position:absolute;top:5px;left:5px;font-size:16px}
.exam-option{border:2px solid red;padding:12px;margin:6px 0;border-radius:12px;font-weight:bold;cursor:pointer}
.gray-box{margin-top:20px;height:240px;background:#333;border-radius:10px;border:2px dashed #444;display:flex;align-items:center;justify-content:center;color:#777}
.back-exam{position:fixed;bottom:12px;left:12px;border:2px solid green;background:none;color:white;padding:8px;border-radius:10px}
</style>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-auth.js";

const firebaseConfig={
apiKey:"AIzaSyCXzhUgYy1MMvnftDi1d5XFeRJTFa35eQU",
authDomain:"tunilearn-e4b8e.firebaseapp.com",
projectId:"tunilearn-e4b8e",
storageBucket:"tunilearn-e4b8e.appspot.com",
messagingSenderId:"730477107505",
appId:"1:730477107505:web:eee97b8ef099326b8cf810"
};

const app=initializeApp(firebaseConfig);
const auth=getAuth(app);
const sBox=document.getElementById("status");

window.signup=async()=>{
const e=email.value,p=password.value;
if(!e||!p){sBox.innerText="أدخل البيانات";return;}
try{
await createUserWithEmailAndPassword(auth,e,p);
sBox.innerText="تم التسجيل بنجاح";sBox.style.color="lime";
}catch(err){sBox.innerText="خطأ في التسجيل";sBox.style.color="red";}
};

window.login=async()=>{
try{
await signInWithEmailAndPassword(auth,email.value,password.value);
authDiv.style.display="none";
home.style.display="block";
renderLevels();
}catch{ sBox.innerText="بيانات خاطئة"; }
};

window.forgotPassword=async()=>{
if(!email.value)return;
await sendPasswordResetEmail(auth,email.value);
sBox.innerText="تم إرسال رابط الاسترجاع";
};
</script>
</head>

<body>

<div id="auth">
<div class="phone">
<h1>Tuni<span class="dot">•</span><span class="tuni">Learn</span></h1>
<p class="top-text">المنصة التونسية للفروض والامتحانات</p>
<input id="email" placeholder="Email">
<input id="password" type="password" placeholder="Password">
<button id="showPass" onclick="password.type=password.type==='password'?'text':'password'">Show password</button>
<div class="buttons">
<button onclick="signup()">Sign up</button>
<button onclick="login()">Log in</button>
</div>
<button id="forgot" onclick="forgotPassword()">نسيت كلمة المرور</button>
<div id="status"></div>
</div>
</div>

<div id="home">
<h1>Tuni<span class="dot">•</span><span class="tuni">Learn</span></h1>
<div class="banner">جميع الفروض والامتحانات حسب المستويات و الشعب</div>
<div class="level-container" id="levelContainer"></div>
</div>

<div id="subjectPage">
<h1>Tuni<span class="dot">•</span><span class="tuni">Learn</span></h1>
<div class="banner-subject" id="subjBanner"></div>
<div class="subject-list" id="subjectList"></div>
<button class="back" onclick="backLevel()">Back</button>
</div>

<div id="examPage">
<h1>Tuni<span class="dot">•</span><span class="tuni">Learn</span></h1>
<h2 id="examTitle" style="margin-top:20px;color:#87cefa"></h2>
<div id="examChoice">
<div class="exam-option" onclick="showTest('مراقبة')">فروض مراقبة</div>
<div class="exam-option" onclick="showTest('تأليفية')">فروض تأليفية</div>
</div>
<div id="examResult"></div>
<button class="back-exam" onclick="backToSubjects()">Back</button>
</div>

<script>
const levels={
"7 أساسي":["عربية","فرنسية","انڨليزية","رياضيات","علوم","تربية اسلامية","تربية مدنية","اعلامية","فيزياء","تكنولوجيا","تاريخ","جغرافيا"],
"8 أساسي":["عربية","فرنسية","انڨليزية","رياضيات","علوم","تربية اسلامية","تربية مدنية","اعلامية","فيزياء","تكنولوجيا","تاريخ","جغرافيا"],
"9 أساسي":["عربية","فرنسية","انڨليزية","رياضيات","علوم","تربية اسلامية","تربية مدنية","اعلامية","فيزياء","تكنولوجيا","تاريخ","جغرافيا"],
"1 ثانوي":["عربية","فرنسية","انڨليزية","رياضيات","علوم الحياة و الارض","فيزياء","كيمياء","تكنولوجيا","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","اعلامية"],
"2 ثانوي":{
"آداب":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","اعلامية"],
"علوم":["رياضيات","علوم فزيائية","علوم الحياة و الارض","تكنولوجيا","عربية","فرنسية","انڨليزية"],
"اقتصاد و تصرف":["اقتصاد","التصرف","رياضيات","تاريخ","جغرافيا","فرنسية","انڨليزية"],
"تكنولجيا اعلامية":["اعلامية","رياضيات","علوم فزيائية","تكنولوجيا","فرنسية","انڨليزية"]},
"3 ثانوي":{
"آداب":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","فلسفة"],
"علوم":["علوم فزيائية","علوم الحياة و الارض","رياضيات","فرنسية","انڨليزية"],
"علوم تقنية":["تكنولوجيا","رياضيات","علوم فزيائية","فرنسية","انڨليزية"],
"رياضيات":["رياضيات","علوم فزيائية","فرنسية","انڨليزية"],
"اقتصاد و تصرف":["اقتصاد","التصرف","رياضيات","تاريخ","جغرافيا","فرنسية","انڨليزية"],
"اعلامية":["اعلامية","رياضيات","علوم فزيائية","فرنسية","انڨليزية"]},
"باكالوريا":{
"آداب":["فلسفة","عربية","تاريخ","جغرافيا","تفكير اسلامي","فرنسية","انڨليزية"],
"رياضيات":["رياضيات","علوم فزيائية","علوم الحياة و الارض","فرنسية","انڨليزية"],
"علوم تجريبية":["علوم الحياة و الارض","علوم فزيائية","رياضيات","فرنسية","انڨليزية"],
"علوم تقنية":["تكنولوجيا","رياضيات","علوم فزيائية","فرنسية","انڨليزية"],
"اقتصاد و تصرف":["اقتصاد","التصرف","رياضيات","تاريخ","جغرافيا","فرنسية","انڨليزية"],
"اعلامية":["خوارزميات","قواعد بيانات","اعلامية","رياضيات","علوم فزيائية","انڨليزية"]}
};

let openedBranch=null,currentSub="";

function renderLevels(){
levelContainer.innerHTML="";
Object.keys(levels).forEach(l=>{
const wrap=document.createElement("div");
wrap.className="level-wrapper";
const lvl=document.createElement("div");
lvl.className="level";
lvl.innerText=l;
const branches=document.createElement("div");
branches.className="branches";
const data=levels[l];
if(typeof data==="object"&&!Array.isArray(data)){
Object.keys(data).forEach(b=>{
const br=document.createElement("div");
br.className="branch";
br.innerText=b;
br.onclick=()=>showSubjects(data[b],l+" - "+b);
branches.appendChild(br);
});
lvl.onclick=()=>{
if(openedBranch&&openedBranch!==branches)openedBranch.style.display="none";
branches.style.display=branches.style.display==="flex"?"none":"flex";
openedBranch=branches.style.display==="flex"?branches:null;
};
}else lvl.onclick=()=>showSubjects(data,l);
wrap.appendChild(lvl);wrap.appendChild(branches);levelContainer.appendChild(wrap);
});
}

function showSubjects(subs,title){
home.style.display="none";
subjectPage.style.display="block";
subjBanner.innerText=title;
subjectList.innerHTML="";
subs.forEach(s=>{
const d=document.createElement("div");
d.innerText=s;
d.onclick=()=>{
currentSub=s;
subjectPage.style.display="none";
examPage.style.display="block";
examTitle.innerText=s;
examChoice.style.display="block";
examResult.innerHTML="";
};
subjectList.appendChild(d);
});
}

function showTest(type){
examChoice.style.display="none";
examResult.innerHTML=`<div class="gray-box">لا توجد ملفات لـ ${currentSub} (${type})</div>`;
}

function backLevel(){subjectPage.style.display="none";home.style.display="block"}
function backToSubjects(){
if(examChoice.style.display==="none"){examChoice.style.display="block";examResult.innerHTML="";}
else{examPage.style.display="none";subjectPage.style.display="block";}
}
</script>

</body>
</html>
