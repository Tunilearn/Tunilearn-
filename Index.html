<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tuni<span style="color:red">•</span>Learn</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial}
html, body{width:100%;height:100%;margin:0;padding:0}
body{background:#111;color:#1e90ff;display:flex;justify-content:center;align-items:center;flex-direction:column;overflow-x:hidden}

/* AUTH */
#auth{display:flex;justify-content:center;align-items:flex-start;width:100%;height:100vh;background:#111;position:fixed;top:0;left:0;z-index:1000;padding-top:80px;}
.phone{width:90%;max-width:360px;background:#1a1a1a;padding:20px;border-radius:20px;text-align:center;transform:translateY(0);margin:auto;}
.phone h1{color:white;font-size:22px;margin-bottom:4px}
.phone .dot{color:red}
.phone .tuni{color:white;font-weight:bold;margin:0 2px;}
.phone p.top-text{color:#87cefa;font-size:14px;margin-bottom:8px;font-weight:bold}
.phone p.description{color:#87cefa;font-size:14px;margin-bottom:8px}
input{width:100%;padding:10px;margin:6px 0;border-radius:10px;border:none;font-size:14px}
#showPass{width:100%;background:#333;color:white;border:none;font-size:12px;padding:6px;border-radius:999px;margin-bottom:10px}
.buttons{display:flex;justify-content:space-between}
button{width:48%;padding:10px;border:none;border-radius:12px;background:#e53935;color:white;font-weight:bold;cursor:pointer;font-size:14px}
#forgot{width:65%;margin:6px auto;display:block;font-size:12px;background:#2196f3;padding:6px;border-radius:8px}
#status{color:#ff5252;margin-top:8px;font-weight:bold;text-align:center}

/* HOME */
#home{display:none;padding:8px;width:100%;max-width:360px;margin:0 auto;text-align:center;position:relative;min-height:100vh}
#home h1{position:absolute;top:5px;left:5px;color:white;font-size:16px;font-weight:bold;margin:0}
.banner{border:2px solid #1e90ff;background:#87cefa;color:black;padding:12px;border-radius:14px;font-weight:bold;margin-top:50px;font-size:14px}
.level-container{margin-top:20px;display:flex;flex-direction:column;gap:15px;align-items:flex-start}

/* LEVEL */
.level-wrapper{position:relative;width:100%}
.level{border:2px solid #0d47a1;background:#222;color:#ccc;padding:16px;border-radius:16px;cursor:pointer;font-weight:bold;width:90%;text-align:left;font-size:16px}

/* BRANCHES */
.branches{position:absolute;top:50%;left:calc(50% + 40px);transform:translate(-50%,-50%);width:180px;background:#111;border:2px solid #1e90ff;border-radius:14px;padding:8px;display:none;flex-direction:column;gap:6px;z-index:10}
.branch{border:1px solid #1e90ff;background:#333;color:white;padding:8px;border-radius:12px;font-size:13px;cursor:pointer}

/* SUBJECT PAGE */
#subjectPage{display:none;padding:6px;background:#333;min-height:100vh;color:white;width:100%;max-width:350px;margin:0 auto;text-align:center;position:relative}
#subjectPage h1{position:absolute;top:5px;left:5px;color:white;font-size:16px;font-weight:bold;margin:0}
.banner-subject{border:2px solid #1e90ff;background:#87cefa;color:black;padding:10px;border-radius:12px;font-weight:bold;margin-top:35px;font-size:13px}
.subject-list div{border:2px solid red;padding:8px;margin:5px 0;border-radius:12px;font-weight:bold;cursor:pointer;font-size:13px}
.small-subjects div{font-size:12px;padding:6px}
.back{position:fixed;bottom:12px;left:12px;border:2px solid green;background:none;color:white;padding:8px;border-radius:10px;font-weight:bold}

/* EXAMS */
#examPage{display:none;padding:6px;background:#111;color:white;width:100%;max-width:350px;margin:50px auto 0 auto;text-align:center;position:relative;min-height:90vh}
#examPage h1{position:absolute;top:5px;left:5px;color:white;font-size:16px;font-weight:bold;margin:0}
.exam-option{border:2px solid red;padding:12px;margin:6px 0;border-radius:12px;font-weight:bold;cursor:pointer;font-size:14px}
.back-exam{position:fixed;bottom:12px;left:12px;border:2px solid green;background:none;color:white;padding:8px;border-radius:10px;font-weight:bold}

/* RESPONSIVE */
@media (max-height:700px){
.level{padding:12px;font-size:14px}
.branch{padding:6px;font-size:12px}
.subject-list div,.exam-option{padding:6px;font-size:12px}
}
</style>
<!-- Firebase SDK -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-analytics.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCXzhUgYy1MMvnftDi1d5XFeRJTFa35eQU",
    authDomain: "tunilearn-e4b8e.firebaseapp.com",
    projectId: "tunilearn-e4b8e",
    storageBucket: "tunilearn-e4b8e.appspot.com",
    messagingSenderId: "730477107505",
    appId: "1:730477107505:web:eee97b8ef099326b8cf810",
    measurementId: "G-H17BY13PDN"
  };

  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
</script>
</head>
<body>
<div id="auth">
  <div class="phone">
    <h1>Tuni<span class="dot">•</span><span class="tuni">Learn</span></h1>
    <p class="top-text">المنصة التونسية لاجتياز الفروض والامتحانات</p>
    <p class="description">سجل دخولك وابدى تعلم</p>
    <input id="email" placeholder="Email">
    <input id="password" type="password" placeholder="Password">
    <button id="showPass" onclick="password.type=password.type==='password'?'text':'password'">Show password</button>
    <div class="buttons">
      <button onclick="signup()">Sign up</button>
      <button onclick="login()">Log in</button>
    </div>
    <button id="forgot" onclick="forgotPassword()">نسيت كلمة المرور</button>
    <div id="status"></div>
  </div>
</div>

<div id="home">
  <h1>Tuni<span class="dot">•</span><span class="tuni">Learn</span></h1>
  <div class="banner" id="topBanner">جميع الفروض والامتحانات حسب المستويات و الشعب</div>
  <div class="level-container" id="levelContainer"></div>
</div>

<div id="subjectPage">
  <h1>Tuni<span class="dot">•</span><span class="tuni">Learn</span></h1>
  <div class="banner-subject">جميع الفروض والامتحانات حسب المستويات و الشعب</div>
  <h2 id="subjectTitle"></h2>
  <div class="subject-list" id="subjectList"></div>
  <button class="back" onclick="backLevel()">Back</button>
</div>

<div id="examPage">
  <h1>Tuni<span class="dot">•</span><span class="tuni">Learn</span></h1>
  <h2 id="examTitle"></h2>
  <div class="exam-option">فروض مراقبة</div>
  <div class="exam-option">فروض تأليفية</div>
  <button class="back-exam" onclick="backToSubjects()">Back</button>
</div>

<script>
let users=JSON.parse(localStorage.getItem("users")||"[]");

const levels={
"7 أساسي":["عربية","فرنسية","انڨليزية","رياضيات","علوم","تربية اسلامية","تربية مدنية","اعلامية","فيزياء","تكنولوجيا","تاريخ","جغرافيا"],
"8 أساسي":["عربية","فرنسية","انڨليزية","رياضيات","علوم","تربية اسلامية","تربية مدنية","اعلامية","فيزياء","تكنولوجيا","تاريخ","جغرافيا"],
"9 أساسي":["عربية","فرنسية","انڨليزية","رياضيات","علوم","تربية اسلامية","تربية مدنية","اعلامية","فيزياء","تكنولوجيا","تاريخ","جغرافيا"],
"1 ثانوي":["عربية","فرنسية","انڨليزية","رياضيات","علوم الحياة و الارض","كيمياء","فيزياء","تكنولوجيا","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","اعلامية"],
"2 ثانوي":{"آداب":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","رياضيات","علوم الحياة و الارض","اعلامية"],
"علوم":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","علوم فزيائية","علوم الحياة و الارض","تكنولوجيا"],
"اقتصاد و تصرف":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","اقتصاد","التصرف","رياضيات"],
"تكنولجيا اعلامية":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","رياضيات","علوم فزيائية","اعلامية","تكنولوجيا"]},
"3 ثانوي":{"آداب":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","اعلامية","فلسفة"],
"علوم":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","علوم فزيائية","علوم الحياة و الارض","تكنولوجيا","اعلامية"],
"علوم تقنية":["عربية","فرنسية","انڨليزية","رياضيات","علوم الحياة و الارض","علوم فزيائية","تكنولوجيا","اعلامية"],
"رياضيات":["عربية","فرنسية","انڨليزية","رياضيات","تكنولوجيا","اعلامية"],
"اقتصاد و تصرف":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","اقتصاد","التصرف","رياضيات"],
"تكنولجيا اعلامية":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","رياضيات","علوم فزيائية","اعلامية"]},
"4 ثانوي":{"آداب":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","اعلامية","فلسفة"],
"علوم":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","علوم فزيائية","علوم الحياة و الارض","تكنولوجيا","اعلامية"],
"علوم تقنية":["عربية","فرنسية","انڨليزية","رياضيات","علوم الحياة و الارض","علوم فزيائية","تكنولوجيا","اعلامية"],
"رياضيات":["عربية","فرنسية","انڨليزية","رياضيات","تكنولوجيا","اعلامية"],
"اقتصاد و تصرف":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","تربية اسلامية","تربية مدنية","اقتصاد","التصرف","رياضيات"],
"تكنولجيا اعلامية":["عربية","فرنسية","انڨليزية","تاريخ","جغرافيا","رياضيات","علوم فزيائية","اعلامية"]}
};

function signup(){
  const emailVal=email.value.trim();
  const passVal=password.value.trim();
  if(!emailVal || !passVal){status.innerText="املأ الحقول"; return;}
  const exist=users.find(u=>u.email===emailVal);
  if(exist){status.innerText="ايميل مستعمل"; return;}
  users.push({email:emailVal,password:passVal});
  localStorage.setItem("users",JSON.stringify(users));
  status.innerText="تم التسجيل بنجاح";
}

function login(){
  const emailVal=email.value.trim();
  const passVal=password.value.trim();
  const user=users.find(u=>u.email===emailVal);
  if(!user){status.innerText="عندك كونت قديم؟ سجّل أولا"; return;}
  if(user.password!==passVal){status.innerText="تحقق من كلمة السر"; return;}
  auth.style.display="none";
  home.style.display="block";
  renderLevels();
}

function forgotPassword(){
  const emailVal=email.value.trim();
  const user=users.find(u=>u.email===emailVal);
  if(!user){status.innerText="المستخدم غير موجود"; return;}
  alert("كلمة المرور: "+user.password);
}

let openedBranch=null;

function renderLevels(){
  levelContainer.innerHTML="";
  Object.keys(levels).forEach(l=>{
    const wrap=document.createElement("div");
    wrap.className="level-wrapper";
    const lvl=document.createElement("div");
    lvl.className="level";
    lvl.innerText=l;
    const branches=document.createElement("div");
    branches.className="branches";
    branches.dataset.visible="false";
    const data=levels[l];
    if(typeof data==="object" && !Array.isArray(data)){
      Object.keys(data).forEach(b=>{
        const br=document.createElement("div");
        br.className="branch";
        br.innerText=b;
        br.onclick=()=>showSubjects(data[b],l+" - "+b);
        branches.appendChild(br);
      });
      lvl.onclick=()=>{
        if(openedBranch && openedBranch!==branches){openedBranch.style.display="none"; openedBranch.dataset.visible="false";}
        if(branches.dataset.visible==="true"){branches.style.display="none"; branches.dataset.visible="false"; openedBranch=null;}
        else{branches.style.display="flex"; branches.dataset.visible="true"; openedBranch=branches;}
      };
    }else{lvl.onclick=()=>showSubjects(data,l,true);}
    wrap.appendChild(lvl);
    wrap.appendChild(branches);
    levelContainer.appendChild(wrap);
  });
}

function showSubjects(subs,title,small=false){
  home.style.display="none";
  subjectPage.style.display="block";
  subjectTitle.innerText=title;
  subjectList.innerHTML="";
  subjectList.className="subject-list"+(small?" small-subjects":"");
  subs.forEach(s=>{
    const d=document.createElement("div");
    d.innerText=s;
    d.onclick=()=>{subjectPage.style.display="none";examPage.style.display="block";examTitle.innerText=s};
    subjectList.appendChild(d);
  });
}

function backLevel(){subjectPage.style.display="none";home.style.display="block"}
function backToSubjects(){examPage.style.display="none";subjectPage.style.display="block"}

auth.style.display = "block";
home.style.display = "none";
</script>
</body>
</html>
